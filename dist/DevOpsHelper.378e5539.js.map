{"mappings":";;AAAA,8BAA8B;;AAOf;IACb;;;;GAIC,GACD,OAAO,4BAA4B,SAAS,IAAI,EAAU;QACxD,MAAM,oBAAoB,OAAO,MAAM,CAAC,CAAA,GAAA,SAAC,EAAE,iBAAiB,IACzD,MAAM,CAAC,CAAC,GAAG;YACV,IAAI,EAAE,MAAM,CAAC;YACb,OAAO;QACT,GAAG,EAAE,EACJ,MAAM,CAAC,CAAC,UAAE,MAAM,WAAE,OAAO,EAAE;YAC1B,OAAO,OAAO,WAAW,GAAG,OAAO,CAAC,WAAW,KAAK,YAAY;QAClE,GACC,GAAG,CAAC,CAAC,WAAE,OAAO,EAAE,GAAK;QACxB,MAAM,oBAAoB,kBAAkB,IAAI,CAAC;QACjD,OAAO;IACT;IAEA;;;;GAIC,GACD,OAAc,qBAAqB,GAAG,EAAE;QACtC,0DAA0D;QAC1D,yEAAyE;QACzE,OAAO,KAAK,QAAQ,iBAAiB,KAAK,OAAO,CAAC,kBAAkB;IACtE;AACF","sources":["src/libs/DevOpsHelper.ts"],"sourcesContent":["/// <reference types=\"node\" />\r\n\r\nimport os from 'os'\r\n\r\n/**\r\n * Helper to inspect, check, analyse command send to chatbot\r\n */\r\nexport default class DevOpsHelper {\r\n  /**\r\n   * Get current server IP address\r\n   * @param ipType \"v4\" or \"v6\"\r\n   * @returns\r\n   */\r\n  static getCurrentServerIpAddresses(ipType = 'v4'): string {\r\n    const networkInterfaces = Object.values(os.networkInterfaces())\r\n      .reduce((r, a) => {\r\n        r = r.concat(a)\r\n        return r\r\n      }, [])\r\n      .filter(({ family, address }) => {\r\n        return family.toLowerCase().indexOf(ipType) >= 0 && address !== '127.0.0.1'\r\n      })\r\n      .map(({ address }) => address)\r\n    const serverIpAddresses = networkInterfaces.join(', ')\r\n    return serverIpAddresses\r\n  }\r\n\r\n  /**\r\n   * Get IP from request (if behind proxy, use X-Forwarded-For header)\r\n   * @param req\r\n   * @returns\r\n   */\r\n  public static extractIpFromRequest(req) {\r\n    // TODO: should improve this func to whitelist the proxies\r\n    // TODO: should use this library https://www.npmjs.com/package/request-ip\r\n    return req?.socket?.remoteAddress || req?.headers['x-forwarded-for']\r\n  }\r\n}\r\n"],"names":[],"version":3,"file":"DevOpsHelper.378e5539.js.map","sourceRoot":"../"}