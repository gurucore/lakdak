{"mappings":";;;;;;;;;;;;AAAA,8BAA8B;;AAOf;IACb;;;;GAIC,GACD,OAAO,4BAA4B,SAAS,IAAI,EAAU;QACxD,MAAM,oBAAoB,OAAO,MAAM,CAAC,CAAA,GAAA,mCAAC,EAAE,iBAAiB,IACzD,MAAM,CAAC,CAAC,GAAG;YACV,IAAI,EAAE,MAAM,CAAC;YACb,OAAO;QACT,GAAG,EAAE,EACJ,MAAM,CAAC,CAAC,UAAE,MAAM,WAAE,OAAO,EAAE;YAC1B,OAAO,OAAO,WAAW,GAAG,OAAO,CAAC,WAAW,KAAK,YAAY;QAClE,GACC,GAAG,CAAC,CAAC,WAAE,OAAO,EAAE,GAAK;QACxB,MAAM,oBAAoB,kBAAkB,IAAI,CAAC;QACjD,OAAO;IACT;IAEA;;;;GAIC,GACD,OAAc,qBAAqB,GAAG,EAAE;QACtC,0DAA0D;QAC1D,yEAAyE;QACzE,OAAO,KAAK,QAAQ,iBAAiB,KAAK,OAAO,CAAC,kBAAkB;IACtE;AACF","sources":["src/libs/DevOpsHelper.ts"],"sourcesContent":["/// <reference types=\"node\" />\n\nimport os from 'os'\n\n/**\n * Helper to inspect, check, analyse command send to chatbot\n */\nexport default class DevOpsHelper {\n  /**\n   * Get current server IP address\n   * @param ipType \"v4\" or \"v6\"\n   * @returns\n   */\n  static getCurrentServerIpAddresses(ipType = 'v4'): string {\n    const networkInterfaces = Object.values(os.networkInterfaces())\n      .reduce((r, a) => {\n        r = r.concat(a)\n        return r\n      }, [])\n      .filter(({ family, address }) => {\n        return family.toLowerCase().indexOf(ipType) >= 0 && address !== '127.0.0.1'\n      })\n      .map(({ address }) => address)\n    const serverIpAddresses = networkInterfaces.join(', ')\n    return serverIpAddresses\n  }\n\n  /**\n   * Get IP from request (if behind proxy, use X-Forwarded-For header)\n   * @param req\n   * @returns\n   */\n  public static extractIpFromRequest(req) {\n    // TODO: should improve this func to whitelist the proxies\n    // TODO: should use this library https://www.npmjs.com/package/request-ip\n    return req?.socket?.remoteAddress || req?.headers['x-forwarded-for']\n  }\n}\n"],"names":[],"version":3,"file":"DevOpsHelper.f768ca68.js.map","sourceRoot":"../"}